<!DOCTYPE html>
<!--
menu template for interface
 * SmartCampus
 *  Â©SmartCampus 2014 https://github.com/thomasNDS/SmartCampus2014
 *  License MIT
-->
<html>
    <head>
        <title>Index - Bootstrap</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">

        <!-- Loading Bootstrap -->
        <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css">

        <script type="text/javascript" src="js/libs/jquery/jquery.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div id="wrapper" class="container-fluid">
            <form class="form-horizontal">
                <div class="row">
                    <h1 class="col-sm-12">Covoiturage</h1>
                </div>
                <div class="form-group">
                    <div class="col-sm-2">
                        Strasbourg
                        <input id="dest" type="text" class="form-control" placeholder="Destination">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2">
                        <input id="date" type="date" class="form-control">
                    </div>
                </div>
            </form>
            <div class="col-sm-offset-1">
                <button id="send" onclick="searchTrips();" class="btn btn-primary">Search</button>
            </div>
            <div class="row">
                <h2>Results</h2>
                <!--<img src="images/ajax-loader.gif" alt="Chargement...">-->
                <div id="show"></div>
            </div>
        </div>

        <script>
//            jQuery.post("http://localhost:4242/covoiturage", {
//                "destination": "Paris",
//                "day": "23",
//                "month": "3",
//                "year": "2014"
//            }, function(data, textStatus, jqXHR) {
//                console.log("Post response:");
//                console.dir(data);
//                console.log(textStatus);
//                console.dir(jqXHR);
//                $("#show").html(data);
//            });

            function searchTrips() {
                $("#show").html("<div class=\"row\"><div class=\"col-sm-4\"><img src=\"images/ajax-loader.gif\" alt=\"Chargement...\"></div></div>");
                var date = $("#date").val().split("-");
                jQuery.post("http://localhost:4242/covoiturage", {
                    "destination": $("#dest").val(),
                    "day": date[2],
                    "month": date[1],
                    "year": date[0]
                }, function(data, textStatus, jqXHR) {
                    console.log("Post response:");
                    console.dir(data);
                    console.log(textStatus);
                    console.dir(jqXHR);
                    $("#show").html(data);
                });
            }

        </script>
    </body>
</html>
