<!--  SmartCampus
 Â©SmartCampus 2014 https://github.com/thomasNDS/SmartCampus2014
License MIT-->

<style>
    html{margin:0;padding:0}body{font:75% georgia,sans-serif;line-height:1.88889;color:#555753;background:#fff;margin:0;padding:0;margin-left:45px}p{margin-top:0;text-align:justify}h3{font:italic normal 1.4em georgia,sans-serif;letter-spacing:1px;margin-bottom:0;color:#7D775C}a:link{font-weight:700;text-decoration:none;color:#B7A5DF}a:visited{font-weight:700;text-decoration:none;color:#D4CDDC}a:active,a:hover{text-decoration:underline;color:#9685BA}.ok{color:#fff;background:#90ee90;font-weight:800}.no{color:#fff;background:red;font-weight:800}
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<h1>Init DB Campus</h1>


<script>
    //Variable d'id
    var polytech_id = "a";
    var upmf_id = "b";
    var iae_id = "c";
    var stendhal_id = "d";
    var lig_id = "e";
    var com1_id = "";
    var com2_id = "";
    var sensor_id = "";
    var mesure1_id = "";
    var mesure2_id = "";
    var mesure3_id = "";
    var item1_id = "";
    var item2_id = "";
    var item3_id = "";
    var item4_id = "";
    var RUFramboisierehumidite_id = "";
    var CROUSDortoirChambreMBairQualite_id = "";
    var PolytechBureauDDhumidite_id = "";


</script>

<h2>Mesures</h2>
<div id="mesures"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 42
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure1_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        }
                        else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 18
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure2_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        } else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 3
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure3_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        } else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#mesures").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Sensors</h2>
<div id="sensors"></div>

<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "humidite",
                        "identifiant": "RUFramboisierehumidite",
                        "mesure": [mesure1_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        RUFramboisierehumidite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "humidite",
                        "identifiant": "PolytechBureauDDhumidite",
                        "mesure": [mesure2_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        PolytechBureauDDhumidite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "airQualite",
                        "identifiant": "CROUSDortoirChambreMBairQualite",
                        "mesure": [mesure3_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        CROUSDortoirChambreMBairQualite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#sensors").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Items</h2>
<div id="items"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Salle de cours 42",
                        "description": "Salle de cours 42",
                        "show": false
                    },
                    success: function(data, textStatus, jqXHR) {
                        item1_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Bureau",
                        "description": "Bureau de Didier Donsez",
                        "show": true,
                        "Sensors_data": [PolytechBureauDDhumidite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item2_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Salle FramboisiÃ¨re",
                        "description": "Salle FramboisiÃ¨re",
                        "show": true,
                        "Sensors_data": [RUFramboisierehumidite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "CROUS Dortoir",
                        "description": "Dortoir d'un Ã©tudiant",
                        "show": true,
                        "Sensors_data": [CROUSDortoirChambreMBairQualite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#items").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Buildings</h2>
<div id="entity"></div>
<script>
//    var polytech_id = "a";
//    var upmf_id = "b";
//    var iae_id = "c";
//    var stendhal_id = "d";
//    var com1_id = "";
//    var com2_id = "";
//    var sensor_id = "";
//    var item_id = "";
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                //////COMMMENTS//////
                jQuery.ajax({
                    url: "http://localhost:4242/api/comment",
                    type: 'POST',
                    data: {
                        "value": "Ouai ! Super com test !"
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload.value) {
//                            console.log("Comment ok");
                            com1_id = data.payload._id;
                        } else {
                            console.log("Comment Error");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/comment",
                    type: 'POST',
                    data: {
                        "value": "DeuxiÃ¨me comme de la mort ! Super com test !"
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload.value) {
//                            console.log("Comment ok");
                            com2_id = data.payload._id;
                        } else {
                            console.log("Comment Error");
                        }
                    },
                    async: false,
                    cache: false
                });
                //////////////////
                ////ENTITIES//////
                //////////////////
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Polytech Grenoble",
                        "description": "L'Ãcole Polytechnique de l'universitÃ© Grenoble-I, plus communÃ©ment appelÃ©e Polytech'Grenoble, est l'Ã©cole d'ingÃ©nieurs de l'UniversitÃ© Joseph Fourier. Elle appartient au rÃ©seau Polytech qui regroupe treize Ã©coles d'ingÃ©nieurs universitaires dans toute la France. L'Ã©cole propose diffÃ©rentes formations couvrant ainsi l'ensemble des domaines technologiques modernes. SituÃ©e dans un grand bassin scientifique, elle bÃ©nÃ©ficie d'un riche environnement de recherche et de formation. Polytech Grenoble compte 900 Ã©lÃ¨ves recrutÃ©s en grande majoritÃ© Ã  bac+2. Site web de l'Ã©cole : www.polytech-grenoble.fr/",
                        "type": "Ecole",
                        "infos": [],
                        "comments": [com1_id, com2_id],
                        "latitude": 45.18451,
                        "longitude": 5.753433,
                        "items": [item2_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        polytech_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IAE",
                        "description": "L'Institut d'Administration des Entreprises de Grenoble II (ou IAE Grenoble) est une Ã©cole de management rattachÃ©e Ã  l'universitÃ© Pierre MendÃ¨s France. Les formations sont accessibles en formation initiale, formation continue et alternance et s'adressent Ã  des Ã©tudiants titulaires d'un niveau BAC+3 souhaitant obtenir un diplÃ´me supÃ©rieur spÃ©cialisÃ© et des cadres dÃ©sireux de se perfectionner ou d'Ã©voluer dans leur carriÃ¨re professionnelle. Les enseignements sont dispensÃ©s par des enseignants chercheurs reconnus et par des intervenants extÃ©rieurs issus du monde de l'entreprise. Site web de l'Ã©cole : www.iae-grenoble.fr/â",
                        "type": "Ecole",
                        "infos": [{"uneInfo": "tata"}, {"test": "test2"}],
                        "comments": [com2_id],
                        "latitude": 45.192119,
                        "longitude": 5.765228
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Barnave",
                        "description": "Le Restaurant Universitaire Barnave est situÃ© sur le campus de Saint-Martin d'HÃ¨res. Ce RU est composÃ© de 3 salles : une salle traditionnelle, un snack (la framboisiÃ¨re) et une cafÃ©tÃ©ria. Ce RU accepte le paiement par carte MonÃ©o. Site web des RU : http://www.crous-grenoble.fr/restauration",
                        "type": "Restaurant Universitaire",
                        "comments": [com1_id, com2_id],
                        "latitude": 45.190834,
                        "longitude": 5.760778,
                        "items": [item3_id],
                        "typeCrowdsourcing": "queue"
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "CitÃ© des TaillÃ©es",
                        "description": "La rÃ©sidence universitaire des TaillÃ©es est situÃ©e au coeur du campus de Saint-Martin d'HÃ¨res. Elle est desservie par la ligne B, C et D du tramway et est Ã©quipÃ©e d'un parking, un local Ã  vÃ©lo et une laverie. Cette rÃ©sidence conventionnÃ©e dispose de 200 logements d'une superficie de 20 mÂ² Ã  24 mÂ², rÃ©partis sur 2 bÃ¢timents de 3 ou 4 Ã©tages. Le loyer mensuel sâÃ©lÃ¨ve, selon la superficie, de 206 â¬ Ã  238 â¬. Site web du CROUS : http://www.crous-grenoble.fr/hebergement",
                        "type": "CitÃ© Universitaire",
                        "comments": [],
                        "latitude": 45.189856,
                        "longitude": 5.759966â,
                        "items": [item4_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "LIG",
                        "description": "Le Laboratoire d'Informatique de Grenoble (LIG) a Ã©tÃ© crÃ©Ã© en 2007 et fait partie du pÃ´le acadÃ©mique grenoblois dans le domaine des STI (Sciences et Technologies de lâInformation). Il regroupe prÃ¨s de 600 chercheurs et enseignants-chercheurs provenant de Grenoble INP, de lâUJF, de lâUPMF, de lâUniversitÃ© Stendhal, du CNRS et de lâINRIA. Le projet scientifique du laboratoire a comme objectif principal lâInformatique ambiante, allant des systÃ¨mes embarquÃ©s au Web. Le LIG est composÃ© de 22 Ã©quipes diffÃ©rentes qui travaillent sur une ou plusieurs problÃ©matiques. Site web du LIG : www.liglab.fr/â",
                        "type": "Laboratoire",
                        "comments": [],
                        "latitude": 45.193692,
                        "longitude": 5.769500
                    },
                    success: function(data, textStatus, jqXHR) {
                        lig_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IMAG",
                        "description": "L'UnitÃ© de Formation et de Recherche IMAG de l'UniversitÃ© Joseph Fourier rassemble les enseignants-chercheurs de trois disciplines qui ont participÃ© Ã  la renommÃ©e du site grenoblois depuis plus de 50 ans : Informatique, MathÃ©matiques, MathÃ©matiques AppliquÃ©es. Plus de 160 enseignants, 30 personnels administratifs ou techniques et 100 intervenants extÃ©rieurs contribuent ainsi chaque annÃ©e Ã  la formation de prÃ¨s de 750 Ã©tudiants en licence, en master et 3 en alternance et en doctorat. Site web de l'IMAG : ufrima.imag.fr/â",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.193920,
                        "longitude": 5.768052
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "BibliothÃ¨que U",
                        "description": "La bibliothÃ¨que universitaire de Sciences de Grenoble est situÃ©e au cente du campus de Saint-Martin d'HÃ¨res. Elle offre Ã  la communautÃ© universitaire environ 900 000 volumes, 8 000 titres de pÃ©riodiques, 50 abonnements Ã  des bases de donnÃ©es, 34 000 titres de revues Ã©lectroniques et 300 manuels numÃ©riques. De plus, de nombreuses salles de travail sont mises Ã  disposition des Ã©tudiants. Site web de la BU : sicd1.ujf-grenoble.fr",
                        "type": "BibliothÃ¨que",
                        "comments": [],
                        "latitude": 45.192408,
                        "longitude": 5.769683
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "EVE",
                        "description": "L'Espace Vie Etudiante (EVE) est un bÃ¢timent de 900 mÂ² au coeur du campus de Grenoble. EVE c'est Ã  la fois un cafÃ©, une salle de spectacle, une pÃ©piniÃ¨re d'initiatives, les locaux d'associations hÃ©bergÃ©es (Radio Campus, INTEGRE). Cet espace dÃ©diÃ© aux Ã©tudiants, ouvert sur l'UniversitÃ© et la citÃ©, est un formidable lieu de rencontres, d'Ã©changes et de dÃ©veloppement de projets en tous genres. Depuis 2003, EVE est gÃ©rÃ© par une association Ã©tudiante dans le cadre d'une DÃ©lÃ©gation de Service Public (DSP). Depuis le 1er septembre 2012, c'est l'association Savoirs Ãmancipation Vie Ãtudiante (S.E.V.E.) qui gÃ¨re le bÃ¢timent. Site web de SEVE : asso-seve.org/",
                        "type": "Bar",
                        "comments": [],
                        "latitude": 45.191164,
                        "longitude": 5.767623
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IUT-1",
                        "description": "L'Institut Universitaire de Technologie 1 de Grenoble est composÃ©e de 2000 Ã©tudiants en formation initiale traditionnelle ou en apprentissage et d'environ 400 stagiaires. L'IUT emploie 221 enseignants-chercheurs et enseignants, 90 personnels administratifs et techniques. Des diplÃ´mes sont dÃ©livrÃ©s dans 8 dÃ©partements d'enseignement. Site web de l'IUT-1 : https://iut1.ujf-grenoble.fr/â",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.198784,
                        "longitude": 5.774983
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "UFRAPS",
                        "description": "L'UnitÃ© de Formation et de Recherche en ActivitÃ©s Physiques et Sportives (UFRAPS) est une composante de lâUniversitÃ© Joseph Fourier de Grenoble. Forte de plus de 70 enseignants et enseignants-chercheurs titulaires, lâUFRAPS sâacquitte des trois missions universitaires classiques dans la discipline des Sciences et Techniques des ActivitÃ©s Physiques et Sportives (STAPS). Site web de l'UFRAPS : www-aps.ujf-grenoble.fr/",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.196687,
                        "longitude": 5.777150
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "ENSIMAG",
                        "description": "L'Ã©cole nationale supÃ©rieure d'informatique et de mathÃ©matiques appliquÃ©es (Ensimag) est une grande Ã©cole d'ingÃ©nieurs de l'Institut polytechnique de Grenoble. SpÃ©cialisÃ©e en informatique, mathÃ©matiques et tÃ©lÃ©communications, elle fut fondÃ©e en 1960 par Jean Kuntzmann. L'Ensimag offre une formation basÃ©e Ã  la fois sur la thÃ©orie et la technique. La formation d'ingÃ©nieur se dÃ©roule en trois ans. AprÃ¨s une premiÃ¨re annÃ©e de tronc commun, les Ã©tudiants font le choix d'une des cinq filiÃ¨res proposÃ©es. Site web de l'ENSIMAG : ensimag.grenoble-inp.fr/",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.193077,
                        "longitude": 5.767001
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Banque",
                        "description": "La Banque Postale est un Ã©tablissement bancaire depuis janvier 2006. Elle prend le relais des services financiers du groupe public La Poste dont elle reste une filiale Ã  100%. Sa longue histoire remonte au service public d'Ãtat de La Poste Royale en 1603. L'Ã©volution de ses statuts a Ã©tÃ© progressive, orientant dÃ©sormais les activitÃ©s sur trois secteurs prÃ©cis : le prÃªt immobilier, la gestion d'argent et l'Ã©pargne. Le chiffre d'affaires atteint plus de 5,6 milliards d'euros. Le groupe emploie plus de 29 000 collaborateurs se rÃ©partissant sur l'ensemble du territoire franÃ§ais. Site web de la Banque Postale : https://www.labanquepostale.fr/ ",
                        "type": "Commerce",
                        "comments": [],
                        "latitude": 45.192195,
                        "longitude": 5.771467
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "MÃ©trovÃ©lo est un service accessible Ã  tous offrant des locations de vÃ©los Ã  l'heure ou Ã  l'annÃ©e et des lieux de consigne. 4000 MÃ©trovÃ©los sont en circulation avec un tarif unique Ã  0,10 â¬ de lâheure pour la location en MÃ©trovÃ©loBox et de 3 â¬ Ã  la journÃ©e pour une location en agence. Site web de MÃ©trovÃ©lo : www.metrovelo.fr/",
                        "description": "Description de Metro VÃ©lo",
                        "type": "Commerce",
                        "comments": [],
                        "latitude": 45.192563,
                        "longitude": 5.771168
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "ArrÃªt G.FaurÃ©",
                        "description": "ArrÃªt de Tramway Gabriel FaurÃ©.",
                        "type": "Tram",
                        "comments": [],
                        "latitude": 45.192279,
                        "longitude": 5.764415
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#entity").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<!--<h2>Tram</h2>
<div id="tram"></div>
<script>

    jQuery.ajax({url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
//                var bibli_id = "";
//                var faure_id = "";
//                var condillac_id = "";
//                var taille_id = "";
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {"name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "BIBLIOTHEQUES UNIVERSITAIRES",
//                        "type": "shedule"
//                    },
//                    success: 
//                            function(data, textStatus, jqXHR) {
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "BIBLIOTHEQUES UNIVERSITAIRES",
                    "description": "Arret de tram BIBLIOTHEQUES UNIVERSITAIRES",
                    "type": "arretTram",
                    "infos": [],
//                            "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "CONDILLAC UNIVERSITAIRES",
//                        "type": "shedule",
//                        "latitude": 45.188408,
//                        "longitude": 5.77361,
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "CONDILLAC UNIVERSITAIRES",
                    "description": "Arret de tram CONDILLAC UNIVERSITAIRES",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id],
                    "latitude": 45.188408,
                    "longitude": 5.77361,
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "GABRIEL FAURE",
//                        "type": "shedule"
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "GABRIEL FAURE",
                    "description": "Arret de tram GABRIEL FAURE",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "Taille UNIVERSITE",
//                        "type": "shedule"
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "Taille UNIVERSITE",
                    "description": "Arret de tram Taille UNIVERSITE",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
            }
        }
    });</script>

<h2>RU</h2>
<div id="ru"></div>
<script>
/////////////////////////////////////////////////////DIDEROT/////////////////////////////////////////////////
    var diderot19_id = "";
    var diderot18_id = "";
    var diderot46_id = "";
    var diderot17_id = "";
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {

                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 18,
                        "name": "Entracte",
                        "type": "Salle",
                        "description": "Batiment dessous Diderot"
                    },
                    success: function(data, textStatus, jqXHR) {
                        diderot18_id = data.payload._id;
                        console.log("diderot");
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 46,
                        "name": "Administratif",
                        "type": "Salle",
                        "description": "Viendez pour vos cartes monÃ©o !!"
                    },
                    success: function(data, textStatus, jqXHR) {
                        console.log("diderot");
                        diderot46_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 17,
                        "name": "Traditionnel",
                        "description": "Manger des lÃ©gumes au RU, oui oui oui oui !",
                        "type": "Salle"
                    },
                    success: function(data, textStatus, jqXHR) {
                        diderot17_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Diderot",
                        "description": "Restaurant Universitaire",
                        "type": "Restaurant Universitaire",
                        "items": [diderot17_id, diderot18_id, diderot19_id, diderot46_id],
                        "latitude": 45.191005,
                        "longitude": 5.768699,
                    }, success: function(data, textStatus, jqXHR) {
                        condillac4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                console.log(diderot17_id + "   " + diderot18_id + "   " + diderot19_id + "   " + diderot46_id)
                ///////////////////////////////////////////////CONDILLAC/////////////////////////////////////////
                var condillac4_id = "";
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 4,
                        "name": "Traditionnel",
                        "description": "Salle traditionnelle de Condillac",
                        "type": "Salle"
                    },
                    success: function(data, textStatus, jqXHR) {
                        condillac4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Condillac",
                        "items": [condillac4_id],
                        "description": "Restaurant Universitaire du Campus de Grenoble",
                        "type": "Restaurant Universitaire",
                        "latitude": 45.188408,
                        "longitude": 5.77361,
                    }, success: function(data, textStatus, jqXHR) {
                        barnave3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                /////////////////////////////BARNAVE //////////////////////////////////////////
                var barnave13_id = "";
                var barnave24_id = "";
                var barnave3_id = "";
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 3,
                        "name": "Traditionnel",
                        "description": "Miam j'adore les lÃ©gumes des salles traditionnelles"},
                    success: function(data, textStatus, jqXHR) {
                        barnave3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 13,
                        "name": "Cafeteria",
                        "description": "Viendez manger des pizzas super bonnes de la mort qui tue Ã  la Cafet'!!"},
                    success: function(data, textStatus, jqXHR) {
                        barnave13_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 24,
                        "name": "FramboisiÃ¨re",
                        "description": "La FramboisiÃ¨re c'est trop bon, J'adore !!"},
                    success: function(data, textStatus, jqXHR) {
                        barnave24_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Barnave",
                        "description": "Restaurant Universitaire du Campus de Grenoble",
                        "type": "Restaurant Universitaire",
                        "items": [barnave24_id, barnave13_id, barnave3_id],
                        "latitude": 45.190642,
                        "longitude": 5.760729,
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            }
        }
    });</script>-->

<h2>Administrators</h2>
<div id="admin"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "nicolas",
                        "name": "husson",
                        "login": "nicolas",
                        "password": "password",
                        "entity": [lig_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "thomas",
                        "name": "nunes",
                        "login": "thomas",
                        "password": "password",
                        "entity": [iae_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "simon",
                        "name": "planes",
                        "login": "simon",
                        "password": "password",
                        "entity": [polytech_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "laurene",
                        "name": "guelorgette",
                        "login": "laurene",
                        "password": "password",
                        "entity": [polytech_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            }
        }
    });

</script>

<h1>Usage</h1>
<h4>Afficher l'ensemble des entitÃ©s</h4>
http://localhost:4242/api/entity/ </br>

<h4>Afficher un entitÃ© $id</h4>
http://localhost:4242/api/entity/$id/ </br>

<h4>Afficher les infos d'une entitÃ© $id</h4>
http://localhost:4242/api/entity/$id/infos </br>

<h4>Afficher la premiÃ©re info d'une entitÃ© $id</h4>
http://localhost:4242/api/entity/$id/infos/0 </br>

<h4>Afficher un attribut d'ine info d'une entitÃ© $id</h4>
http://localhost:4242/api/entity/$id/infos/0/uneInfo </br>
