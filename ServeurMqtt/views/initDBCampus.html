<!--  SmartCampus
 ©SmartCampus 2014 https://github.com/thomasNDS/SmartCampus2014
License MIT-->

<style>
    html{margin:0;padding:0}body{font:75% georgia,sans-serif;line-height:1.88889;color:#555753;background:#fff;margin:0;padding:0;margin-left:45px}p{margin-top:0;text-align:justify}h3{font:italic normal 1.4em georgia,sans-serif;letter-spacing:1px;margin-bottom:0;color:#7D775C}a:link{font-weight:700;text-decoration:none;color:#B7A5DF}a:visited{font-weight:700;text-decoration:none;color:#D4CDDC}a:active,a:hover{text-decoration:underline;color:#9685BA}.ok{color:#fff;background:#90ee90;font-weight:800}.no{color:#fff;background:red;font-weight:800}
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<h1>Init DB Campus</h1>


<script>
    //Variable d'id
    var polytech_id = "a";
    var upmf_id = "b";
    var iae_id = "c";
    var stendhal_id = "d";
    var lig_id = "e";
    var com1_id = "";
    var com2_id = "";
    var sensor_id = "";
    var mesure1_id = "";
    var mesure2_id = "";
    var mesure3_id = "";
    var item1_id = "";
    var item2_id = "";
    var item3_id = "";
    var item4_id = "";
    var RUFramboisierehumidite_id = "";
    var CROUSDortoirChambreMBairQualite_id = "";
    var PolytechBureauDDhumidite_id = "";


</script>

<h2>Mesures</h2>
<div id="mesures"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 42
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure1_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        }
                        else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 18
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure2_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        } else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/mesure",
                    type: 'POST',
                    data: {
                        "value": 3
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload._id) {
                            mesure3_id = data.payload._id;
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='ok'> OK </span> <br>");
                        } else
                            $("#mesures").html($("#mesures").html() + "<strong>Value: </strong>" + data.payload.value + "<span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#mesures").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Sensors</h2>
<div id="sensors"></div>

<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "humidite",
                        "identifiant": "RUFramboisierehumidite",
                        "mesure": [mesure1_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        RUFramboisierehumidite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "humidite",
                        "identifiant": "PolytechBureauDDhumidite",
                        "mesure": [mesure2_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        PolytechBureauDDhumidite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/Sensors_data",
                    type: 'POST',
                    data: {
                        "type": "airQualite",
                        "identifiant": "CROUSDortoirChambreMBairQualite",
                        "mesure": [mesure3_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        CROUSDortoirChambreMBairQualite_id = data.payload._id;
                        if (data.payload._id) {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#sensors").html($("#sensors").html() + "<strong>Identifiant: </strong>" + data.payload.identifiant + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#sensors").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Items</h2>
<div id="items"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Salle de cours 42",
                        "description": "Salle de cours 42",
                        "show": false
                    },
                    success: function(data, textStatus, jqXHR) {
                        item1_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Bureau",
                        "description": "Bureau de Didier Donsez",
                        "show": true,
                        "Sensors_data": [PolytechBureauDDhumidite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item2_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "Salle Framboisière",
                        "description": "Salle Framboisière",
                        "show": true,
                        "Sensors_data": [RUFramboisierehumidite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {
                        "name": "CROUS Dortoir",
                        "description": "Dortoir d'un étudiant",
                        "show": true,
                        "Sensors_data": [CROUSDortoirChambreMBairQualite_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        item4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#items").html($("#items").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#items").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<h2>Buildings</h2>
<div id="entity"></div>
<script>
//    var polytech_id = "a";
//    var upmf_id = "b";
//    var iae_id = "c";
//    var stendhal_id = "d";
//    var com1_id = "";
//    var com2_id = "";
//    var sensor_id = "";
//    var item_id = "";
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                //////COMMMENTS//////
                jQuery.ajax({
                    url: "http://localhost:4242/api/comment",
                    type: 'POST',
                    data: {
                        "value": "Ouai ! Super com test !"
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload.value) {
//                            console.log("Comment ok");
                            com1_id = data.payload._id;
                        } else {
                            console.log("Comment Error");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/comment",
                    type: 'POST',
                    data: {
                        "value": "Deuxième comme de la mort ! Super com test !"
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload.value) {
//                            console.log("Comment ok");
                            com2_id = data.payload._id;
                        } else {
                            console.log("Comment Error");
                        }
                    },
                    async: false,
                    cache: false
                });
                //////////////////
                ////ENTITIES//////
                //////////////////
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Polytech Grenoble",
                        "description": "L'École Polytechnique de l'université Grenoble-I, plus communément appelée Polytech'Grenoble, est l'école d'ingénieurs de l'Université Joseph Fourier. Elle appartient au réseau Polytech qui regroupe treize écoles d'ingénieurs universitaires dans toute la France. L'école propose différentes formations couvrant ainsi l'ensemble des domaines technologiques modernes. Située dans un grand bassin scientifique, elle bénéficie d'un riche environnement de recherche et de formation. Polytech Grenoble compte 900 élèves recrutés en grande majorité à bac+2. Site web de l'école : www.polytech-grenoble.fr/",
                        "type": "Ecole",
                        "infos": [],
                        "comments": [com1_id, com2_id],
                        "latitude": 45.18451,
                        "longitude": 5.753433,
                        "items": [item2_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        polytech_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IAE",
                        "description": "L'Institut d'Administration des Entreprises de Grenoble II (ou IAE Grenoble) est une école de management rattachée à l'université Pierre Mendès France. Les formations sont accessibles en formation initiale, formation continue et alternance et s'adressent à des étudiants titulaires d'un niveau BAC+3 souhaitant obtenir un diplôme supérieur spécialisé et des cadres désireux de se perfectionner ou d'évoluer dans leur carrière professionnelle. Les enseignements sont dispensés par des enseignants chercheurs reconnus et par des intervenants extérieurs issus du monde de l'entreprise. Site web de l'école : www.iae-grenoble.fr/‎",
                        "type": "Ecole",
                        "infos": [{"uneInfo": "tata"}, {"test": "test2"}],
                        "comments": [com2_id],
                        "latitude": 45.192119,
                        "longitude": 5.765228
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Barnave",
                        "description": "Le Restaurant Universitaire Barnave est situé sur le campus de Saint-Martin d'Hères. Ce RU est composé de 3 salles : une salle traditionnelle, un snack (la framboisière) et une cafétéria. Ce RU accepte le paiement par carte Monéo. Site web des RU : http://www.crous-grenoble.fr/restauration",
                        "type": "Restaurant Universitaire",
                        "comments": [com1_id, com2_id],
                        "latitude": 45.190834,
                        "longitude": 5.760778,
                        "items": [item3_id],
                        "typeCrowdsourcing": "queue"
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Cité des Taillées",
                        "description": "La résidence universitaire des Taillées est située au coeur du campus de Saint-Martin d'Hères. Elle est desservie par la ligne B, C et D du tramway et est équipée d'un parking, un local à vélo et une laverie. Cette résidence conventionnée dispose de 200 logements d'une superficie de 20 m² à 24 m², répartis sur 2 bâtiments de 3 ou 4 étages. Le loyer mensuel s’élève, selon la superficie, de 206 € à 238 €. Site web du CROUS : http://www.crous-grenoble.fr/hebergement",
                        "type": "Cité Universitaire",
                        "comments": [],
                        "latitude": 45.189856,
                        "longitude": 5.759966‎,
                        "items": [item4_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "LIG",
                        "description": "Le Laboratoire d'Informatique de Grenoble (LIG) a été créé en 2007 et fait partie du pôle académique grenoblois dans le domaine des STI (Sciences et Technologies de l’Information). Il regroupe près de 600 chercheurs et enseignants-chercheurs provenant de Grenoble INP, de l’UJF, de l’UPMF, de l’Université Stendhal, du CNRS et de l’INRIA. Le projet scientifique du laboratoire a comme objectif principal l’Informatique ambiante, allant des systèmes embarqués au Web. Le LIG est composé de 22 équipes différentes qui travaillent sur une ou plusieurs problématiques. Site web du LIG : www.liglab.fr/‎",
                        "type": "Laboratoire",
                        "comments": [],
                        "latitude": 45.193692,
                        "longitude": 5.769500
                    },
                    success: function(data, textStatus, jqXHR) {
                        lig_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IMAG",
                        "description": "L'Unité de Formation et de Recherche IMAG de l'Université Joseph Fourier rassemble les enseignants-chercheurs de trois disciplines qui ont participé à la renommée du site grenoblois depuis plus de 50 ans : Informatique, Mathématiques, Mathématiques Appliquées. Plus de 160 enseignants, 30 personnels administratifs ou techniques et 100 intervenants extérieurs contribuent ainsi chaque année à la formation de près de 750 étudiants en licence, en master et 3 en alternance et en doctorat. Site web de l'IMAG : ufrima.imag.fr/‎",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.193920,
                        "longitude": 5.768052
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Bibliothèque U",
                        "description": "La bibliothèque universitaire de Sciences de Grenoble est située au cente du campus de Saint-Martin d'Hères. Elle offre à la communauté universitaire environ 900 000 volumes, 8 000 titres de périodiques, 50 abonnements à des bases de données, 34 000 titres de revues électroniques et 300 manuels numériques. De plus, de nombreuses salles de travail sont mises à disposition des étudiants. Site web de la BU : sicd1.ujf-grenoble.fr",
                        "type": "Bibliothèque",
                        "comments": [],
                        "latitude": 45.192408,
                        "longitude": 5.769683
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "EVE",
                        "description": "L'Espace Vie Etudiante (EVE) est un bâtiment de 900 m² au coeur du campus de Grenoble. EVE c'est à la fois un café, une salle de spectacle, une pépinière d'initiatives, les locaux d'associations hébergées (Radio Campus, INTEGRE). Cet espace dédié aux étudiants, ouvert sur l'Université et la cité, est un formidable lieu de rencontres, d'échanges et de développement de projets en tous genres. Depuis 2003, EVE est géré par une association étudiante dans le cadre d'une Délégation de Service Public (DSP). Depuis le 1er septembre 2012, c'est l'association Savoirs Émancipation Vie Étudiante (S.E.V.E.) qui gère le bâtiment. Site web de SEVE : asso-seve.org/",
                        "type": "Bar",
                        "comments": [],
                        "latitude": 45.191164,
                        "longitude": 5.767623
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "IUT-1",
                        "description": "L'Institut Universitaire de Technologie 1 de Grenoble est composée de 2000 étudiants en formation initiale traditionnelle ou en apprentissage et d'environ 400 stagiaires. L'IUT emploie 221 enseignants-chercheurs et enseignants, 90 personnels administratifs et techniques. Des diplômes sont délivrés dans 8 départements d'enseignement. Site web de l'IUT-1 : https://iut1.ujf-grenoble.fr/‎",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.198784,
                        "longitude": 5.774983
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "UFRAPS",
                        "description": "L'Unité de Formation et de Recherche en Activités Physiques et Sportives (UFRAPS) est une composante de l’Université Joseph Fourier de Grenoble. Forte de plus de 70 enseignants et enseignants-chercheurs titulaires, l’UFRAPS s’acquitte des trois missions universitaires classiques dans la discipline des Sciences et Techniques des Activités Physiques et Sportives (STAPS). Site web de l'UFRAPS : www-aps.ujf-grenoble.fr/",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.196687,
                        "longitude": 5.777150
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "ENSIMAG",
                        "description": "L'école nationale supérieure d'informatique et de mathématiques appliquées (Ensimag) est une grande école d'ingénieurs de l'Institut polytechnique de Grenoble. Spécialisée en informatique, mathématiques et télécommunications, elle fut fondée en 1960 par Jean Kuntzmann. L'Ensimag offre une formation basée à la fois sur la théorie et la technique. La formation d'ingénieur se déroule en trois ans. Après une première année de tronc commun, les étudiants font le choix d'une des cinq filières proposées. Site web de l'ENSIMAG : ensimag.grenoble-inp.fr/",
                        "type": "Ecole",
                        "comments": [],
                        "latitude": 45.193077,
                        "longitude": 5.767001
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Banque",
                        "description": "La Banque Postale est un établissement bancaire depuis janvier 2006. Elle prend le relais des services financiers du groupe public La Poste dont elle reste une filiale à 100%. Sa longue histoire remonte au service public d'État de La Poste Royale en 1603. L'évolution de ses statuts a été progressive, orientant désormais les activités sur trois secteurs précis : le prêt immobilier, la gestion d'argent et l'épargne. Le chiffre d'affaires atteint plus de 5,6 milliards d'euros. Le groupe emploie plus de 29 000 collaborateurs se répartissant sur l'ensemble du territoire français. Site web de la Banque Postale : https://www.labanquepostale.fr/ ",
                        "type": "Commerce",
                        "comments": [],
                        "latitude": 45.192195,
                        "longitude": 5.771467
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Métrovélo est un service accessible à tous offrant des locations de vélos à l'heure ou à l'année et des lieux de consigne. 4000 Métrovélos sont en circulation avec un tarif unique à 0,10 € de l’heure pour la location en MétrovéloBox et de 3 € à la journée pour une location en agence. Site web de Métrovélo : www.metrovelo.fr/",
                        "description": "Description de Metro Vélo",
                        "type": "Commerce",
                        "comments": [],
                        "latitude": 45.192563,
                        "longitude": 5.771168
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Arrêt G.Fauré",
                        "description": "Arrêt de Tramway Gabriel Fauré.",
                        "type": "Tram",
                        "comments": [],
                        "latitude": 45.192279,
                        "longitude": 5.764415
                    },
                    success: function(data, textStatus, jqXHR) {
                        iae_id = data.payload._id;
                        $("#entity").html($("#entity").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            } else {
                $("#entity").html("<span class='no'> ERROR BD already init !  </span> <br> To remove : mongo<br> use Client<br> db.dropDatabase();");
            }
        }
    });
</script>

<!--<h2>Tram</h2>
<div id="tram"></div>
<script>

    jQuery.ajax({url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
//                var bibli_id = "";
//                var faure_id = "";
//                var condillac_id = "";
//                var taille_id = "";
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {"name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "BIBLIOTHEQUES UNIVERSITAIRES",
//                        "type": "shedule"
//                    },
//                    success: 
//                            function(data, textStatus, jqXHR) {
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "BIBLIOTHEQUES UNIVERSITAIRES",
                    "description": "Arret de tram BIBLIOTHEQUES UNIVERSITAIRES",
                    "type": "arretTram",
                    "infos": [],
//                            "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "CONDILLAC UNIVERSITAIRES",
//                        "type": "shedule",
//                        "latitude": 45.188408,
//                        "longitude": 5.77361,
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "CONDILLAC UNIVERSITAIRES",
                    "description": "Arret de tram CONDILLAC UNIVERSITAIRES",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id],
                    "latitude": 45.188408,
                    "longitude": 5.77361,
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "GABRIEL FAURE",
//                        "type": "shedule"
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "GABRIEL FAURE",
                    "description": "Arret de tram GABRIEL FAURE",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
//                jQuery.ajax({url: "http://localhost:4242/api/item",
//                    async: false,
//                    cache: false,
//                    type: 'POST',
//                    data: {
//                        "name": "Horaires",
//                        "description": "Horaires",
//                        "identifiantString": "Taille UNIVERSITE",
//                        "type": "shedule"
//                    }, success: function(data, textStatus, jqXHR) {
//                        $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                jQuery.post("http://localhost:4242/api/entity", {
                    "name": "Taille UNIVERSITE",
                    "description": "Arret de tram Taille UNIVERSITE",
                    "type": "arretTram",
                    "infos": [],
                    "items": [data.payload._id]
                }, function(data, textStatus, jqXHR) {
                    $("#tram").html($("#tram").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                });
//                    }});
            }
        }
    });</script>

<h2>RU</h2>
<div id="ru"></div>
<script>
/////////////////////////////////////////////////////DIDEROT/////////////////////////////////////////////////
    var diderot19_id = "";
    var diderot18_id = "";
    var diderot46_id = "";
    var diderot17_id = "";
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {

                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 18,
                        "name": "Entracte",
                        "type": "Salle",
                        "description": "Batiment dessous Diderot"
                    },
                    success: function(data, textStatus, jqXHR) {
                        diderot18_id = data.payload._id;
                        console.log("diderot");
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 46,
                        "name": "Administratif",
                        "type": "Salle",
                        "description": "Viendez pour vos cartes monéo !!"
                    },
                    success: function(data, textStatus, jqXHR) {
                        console.log("diderot");
                        diderot46_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 17,
                        "name": "Traditionnel",
                        "description": "Manger des légumes au RU, oui oui oui oui !",
                        "type": "Salle"
                    },
                    success: function(data, textStatus, jqXHR) {
                        diderot17_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Diderot",
                        "description": "Restaurant Universitaire",
                        "type": "Restaurant Universitaire",
                        "items": [diderot17_id, diderot18_id, diderot19_id, diderot46_id],
                        "latitude": 45.191005,
                        "longitude": 5.768699,
                    }, success: function(data, textStatus, jqXHR) {
                        condillac4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                console.log(diderot17_id + "   " + diderot18_id + "   " + diderot19_id + "   " + diderot46_id)
                ///////////////////////////////////////////////CONDILLAC/////////////////////////////////////////
                var condillac4_id = "";
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 4,
                        "name": "Traditionnel",
                        "description": "Salle traditionnelle de Condillac",
                        "type": "Salle"
                    },
                    success: function(data, textStatus, jqXHR) {
                        condillac4_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Condillac",
                        "items": [condillac4_id],
                        "description": "Restaurant Universitaire du Campus de Grenoble",
                        "type": "Restaurant Universitaire",
                        "latitude": 45.188408,
                        "longitude": 5.77361,
                    }, success: function(data, textStatus, jqXHR) {
                        barnave3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                /////////////////////////////BARNAVE //////////////////////////////////////////
                var barnave13_id = "";
                var barnave24_id = "";
                var barnave3_id = "";
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 3,
                        "name": "Traditionnel",
                        "description": "Miam j'adore les légumes des salles traditionnelles"},
                    success: function(data, textStatus, jqXHR) {
                        barnave3_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 13,
                        "name": "Cafeteria",
                        "description": "Viendez manger des pizzas super bonnes de la mort qui tue à la Cafet'!!"},
                    success: function(data, textStatus, jqXHR) {
                        barnave13_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/item",
                    type: 'POST',
                    data: {"identifiant": 24,
                        "name": "Framboisière",
                        "description": "La Framboisière c'est trop bon, J'adore !!"},
                    success: function(data, textStatus, jqXHR) {
                        barnave24_id = data.payload._id;
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/entity",
                    type: 'POST',
                    data: {
                        "name": "Barnave",
                        "description": "Restaurant Universitaire du Campus de Grenoble",
                        "type": "Restaurant Universitaire",
                        "items": [barnave24_id, barnave13_id, barnave3_id],
                        "latitude": 45.190642,
                        "longitude": 5.760729,
                    }, success: function(data, textStatus, jqXHR) {
                        if (data.payload.name) {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        } else {
                            $("#ru").html($("#ru").html() + "<strong>Name: </strong>" + data.payload.name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                        }
                    },
                    async: false,
                    cache: false
                });
            }
        }
    });</script>-->

<h2>Administrators</h2>
<div id="admin"></div>
<script>
    jQuery.ajax({
        url: "http://localhost:4242/is-init",
        type: 'GET',
        async: false,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            if (!data) {
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "nicolas",
                        "name": "husson",
                        "login": "nicolas",
                        "password": "password",
                        "entity": [lig_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "thomas",
                        "name": "nunes",
                        "login": "thomas",
                        "password": "password",
                        "entity": [iae_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "simon",
                        "name": "planes",
                        "login": "simon",
                        "password": "password",
                        "entity": [polytech_id]
                    }, 
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
                jQuery.ajax({
                    url: "http://localhost:4242/api/administrator",
                    type: 'POST',
                    data: {
                        "first_name": "laurene",
                        "name": "guelorgette",
                        "login": "laurene",
                        "password": "password",
                        "entity": [polytech_id]
                    },
                    success: function(data, textStatus, jqXHR) {
                        if (data.payload._id)
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='ok'> OK </span> <br>");
                        else
                            $("#admin").html($("#admin").html() + "<strong>Name: </strong>" + data.payload.name + " " + data.payload.first_name + " <strong>ID: </strong> " + data.payload._id + " <span class='no'> ERROR </span> <br>");
                    },
                    async: false,
                    cache: false
                });
            }
        }
    });

</script>

<h1>Usage</h1>
<h4>Afficher l'ensemble des entités</h4>
http://localhost:4242/api/entity/ </br>

<h4>Afficher un entité $id</h4>
http://localhost:4242/api/entity/$id/ </br>

<h4>Afficher les infos d'une entité $id</h4>
http://localhost:4242/api/entity/$id/infos </br>

<h4>Afficher la premiére info d'une entité $id</h4>
http://localhost:4242/api/entity/$id/infos/0 </br>

<h4>Afficher un attribut d'ine info d'une entité $id</h4>
http://localhost:4242/api/entity/$id/infos/0/uneInfo </br>
